<!DOCTYPE html>
<html>
<head>
  <title>Send a Song</title>
</head>
<body>
  <h1>🎵 Request a Song</h1>

  <form id="songForm">
    <input type="url" id="youtube_link" placeholder="Enter YouTube Link" required />
    <button type="submit">Send</button>
  </form>

  <script>
    const BACKEND_URL = "https://song-request-app.onrender.com"; // 🔁 Replace this with your actual Render URL if different

    document.getElementById('songForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const youtube_link = document.getElementById('youtube_link').value;

      try {
        const response = await fetch(`${BACKEND_URL}/send`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({ youtube_link })
        });

        if (response.ok) {
          alert('🎉 Song sent!');
          document.getElementById('songForm').reset();
        } else {
          alert('⚠️ Failed to send song. Please try again.');
        }
      } catch (err) {
        alert('❌ Error contacting the server.');
        console.error(err);
      }
    });
  </script>
</body>
</html>
